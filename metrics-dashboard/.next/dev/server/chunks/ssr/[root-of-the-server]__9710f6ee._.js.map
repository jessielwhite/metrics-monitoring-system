{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/jessiewhite/Development/Tech_Screens/Tensorwave/sre-take-home-challenge-15dc00b/www/pages/api/api.ts"],"sourcesContent":["import { Metric, WorkloadStatus } from './types';\n\nconst API_URL = process.env.SERVER_ADDRESS || '';\n\nexport async function getCurrentMetric(): Promise<Metric> {\n    const response = await fetch(`${API_URL}/api/metrics?range=1h&limit=1`);\n\n    if (!response.ok) {\n        throw new Error('Failed to fetch current metric');\n    }\n\n    const metrics = await response.json();\n    if (metrics.length === 0) {\n        throw new Error('No metrics found');\n    }\n\n    return metrics[0];\n}\n\nexport async function getMetricsHistory(timeRange: '1h' | '24h' | '7d', agentId?: string, type?: string): Promise<Metric[]> {\n    let url = `${API_URL}/api/metrics?range=${timeRange}`;\n    if (agentId) url += `&agent_id=${agentId}`;\n    if (type) url += `&type=${type}`;\n\n    const response = await fetch(url);\n\n    if (!response.ok) {\n        throw new Error('Failed to fetch metrics history');\n    }\n\n    return response.json();\n}\n\nexport async function getWorkloadStatus(): Promise<WorkloadStatus> {\n    let response;\n\n        response = await fetch(`${API_URL}/api/workload/status`);\n\n        if (!response.ok) {\n            throw new Error('Failed to fetch workload status');\n        }\n\n        return response.json();\n    }\n\nexport async function startWorkload(): Promise<WorkloadStatus> {\n    const response = await fetch(`${API_URL}/api/workload/start`, {\n        method: 'POST',\n    });\n\n    if (!response.ok) {\n        throw new Error('Failed to start workload');\n    }\n\n    return response.json();\n}\n\nexport async function stopWorkload(): Promise<WorkloadStatus> {\n    const response = await fetch(`${API_URL}/api/workload/stop`, {\n        method: 'POST',\n    });\n\n    if (!response.ok) {\n        throw new Error('Failed to stop workload');\n    }\n\n    return response.json();\n}"],"names":[],"mappings":";;;;;;;;;;;;AAEA,MAAM,UAAU,QAAQ,GAAG,CAAC,cAAc,IAAI;AAEvC,eAAe;IAClB,MAAM,WAAW,MAAM,MAAM,GAAG,QAAQ,6BAA6B,CAAC;IAEtE,IAAI,CAAC,SAAS,EAAE,EAAE;QACd,MAAM,IAAI,MAAM;IACpB;IAEA,MAAM,UAAU,MAAM,SAAS,IAAI;IACnC,IAAI,QAAQ,MAAM,KAAK,GAAG;QACtB,MAAM,IAAI,MAAM;IACpB;IAEA,OAAO,OAAO,CAAC,EAAE;AACrB;AAEO,eAAe,kBAAkB,SAA8B,EAAE,OAAgB,EAAE,IAAa;IACnG,IAAI,MAAM,GAAG,QAAQ,mBAAmB,EAAE,WAAW;IACrD,IAAI,SAAS,OAAO,CAAC,UAAU,EAAE,SAAS;IAC1C,IAAI,MAAM,OAAO,CAAC,MAAM,EAAE,MAAM;IAEhC,MAAM,WAAW,MAAM,MAAM;IAE7B,IAAI,CAAC,SAAS,EAAE,EAAE;QACd,MAAM,IAAI,MAAM;IACpB;IAEA,OAAO,SAAS,IAAI;AACxB;AAEO,eAAe;IAClB,IAAI;IAEA,WAAW,MAAM,MAAM,GAAG,QAAQ,oBAAoB,CAAC;IAEvD,IAAI,CAAC,SAAS,EAAE,EAAE;QACd,MAAM,IAAI,MAAM;IACpB;IAEA,OAAO,SAAS,IAAI;AACxB;AAEG,eAAe;IAClB,MAAM,WAAW,MAAM,MAAM,GAAG,QAAQ,mBAAmB,CAAC,EAAE;QAC1D,QAAQ;IACZ;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QACd,MAAM,IAAI,MAAM;IACpB;IAEA,OAAO,SAAS,IAAI;AACxB;AAEO,eAAe;IAClB,MAAM,WAAW,MAAM,MAAM,GAAG,QAAQ,kBAAkB,CAAC,EAAE;QACzD,QAAQ;IACZ;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QACd,MAAM,IAAI,MAAM;IACpB;IAEA,OAAO,SAAS,IAAI;AACxB"}},
    {"offset": {"line": 74, "column": 0}, "map": {"version":3,"sources":["file:///Users/jessiewhite/Development/Tech_Screens/Tensorwave/sre-take-home-challenge-15dc00b/www/pages/index.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { getCurrentMetric, getMetricsHistory } from './api/api';\nimport type { Metric } from './api/types';\nimport { getMetricsCollection } from './api/db';\n\nexport default function Home() {\n  const [input, setInput] = useState('');\n  const [metrics, setMetrics] = useState<Metric[]>([]);\n  const [response, setResponse] = useState<string | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n    const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    setError(null);\n    setResponse(null);\n\n    try {\n      const res = await getCurrentMetric();\n      if (res) {\n        setMetrics([res]);\n      } else {\n        setError('Invalid metric data received');\n      }\n    } catch (err: any) {\n      setError(err.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const submitMetrics = async () => {\n    try {\n      setLoading(true);\n      const res = await fetch('/api/metrics', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ metrics }),\n      });\n      const data = await res.json();\n\n      if (!res.ok) {\n        throw new Error(data.error || 'Failed to submit metrics');\n      }\n\n      setMetrics([]);\n      setError(null);\n    } catch (err: any) {\n      setError(err.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n\n  const fetchMetrics = async () => {\n    try {\n      setLoading(true);\n      const res = await fetch('/api/metrics');\n      const data = await res.json();\n\n      if (!res.ok) {\n        throw new Error(data.error || 'Failed to fetch metrics');\n      }\n\n      setMetrics(data.metrics);\n      setError(null);\n    } catch (err: any) {\n      setError(err.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    getCurrentMetric().then((res) => {\n      if (res) {\n        setMetrics([res]);\n      }\n      setLoading(false);\n    }).catch((err) => {\n      setError(err.message);\n      setLoading(false);\n    });\n    }, []);\n\n  return (\n    <div style={{\n      maxWidth: '1200px',\n      margin: '50px auto',\n      padding: '20px',\n      fontFamily: 'system-ui, sans-serif'\n    }}>\n      <h1>Metrics Monitoring Dashboard</h1>\n      <p>Real-time metrics from the Metrics Agent</p>\n      <form onSubmit={handleSubmit} style={{ marginTop: '30px' }}>\n        <div style={{ marginBottom: '15px' }}>\n          <label htmlFor=\"input\" style={{ display: 'block', marginBottom: '5px' }}>\n            Test Input:\n          </label>\n          <input\n            id=\"input\"\n            type=\"text\"\n            value={input}\n            onChange={(e) => setInput(e.target.value)}\n            style={{\n              width: '100%',\n              padding: '10px',\n              fontSize: '16px',\n              border: '1px solid #ccc',\n              borderRadius: '4px',\n            }}\n            disabled={loading}\n          />\n        </div>\n      </form>\n      {error && (\n        <div style={{\n          marginTop: '20px',\n          padding: '15px',\n          backgroundColor: '#fee',\n          border: '1px solid #fcc',\n          borderRadius: '4px',\n          color: '#c00',\n        }}>\n          <strong>Error:</strong> {error}\n        </div>\n      )}\n\n      {response && (\n        <div style={{\n          marginTop: '20px',\n          padding: '15px',\n          backgroundColor: '#efe',\n          border: '1px solid #cfc',\n          borderRadius: '4px',\n        }}>\n          <strong>Response from Rust server:</strong>\n          <div style={{ marginTop: '10px', fontSize: '18px' }}>{response}</div>\n        </div>\n      )}\n      <div style={{ marginTop: '30px' }}>\n        <button\n          onClick={submitMetrics}\n          disabled={loading}\n          style={{\n            padding: '10px 20px',\n            fontSize: '16px',\n            backgroundColor: loading ? '#ccc' : '#28a745',\n            color: 'white',\n            border: 'none',\n            borderRadius: '4px',\n            cursor: loading ? 'not-allowed' : 'pointer',\n            marginRight: '10px',\n          }}\n        >\n          {loading ? 'Loading...' : 'Submit Metrics'}\n        </button>\n        <button\n          onClick={fetchMetrics}\n          disabled={loading}\n          style={{\n            padding: '10px 20px',\n            fontSize: '16px',\n            backgroundColor: loading ? '#ccc' : '#0070f3',\n            color: 'white',\n            border: 'none',\n            borderRadius: '4px',\n            cursor: loading ? 'not-allowed' : 'pointer',\n          }}\n        >\n          {loading ? 'Loading...' : 'Refresh Metrics'}\n        </button>\n      </div>\n      {metrics.length > 0 ? (\n        <table style={{\n          width: '100%',\n          borderCollapse: 'collapse',\n          border: '1px solid #ddd',\n          marginTop: '20px',\n        }}>\n          <thead>\n            <tr style={{ backgroundColor: '#f5f5f5' }}>\n              <th style={{ padding: '10px', border: '1px solid #ddd' }}>Agent ID</th>\n              <th style={{ padding: '10px', border: '1px solid #ddd' }}>Metric Name</th>\n              <th style={{ padding: '10px', border: '1px solid #ddd' }}>Value</th>\n              <th style={{ padding: '10px', border: '1px solid #ddd' }}>Unit</th>\n              <th style={{ padding: '10px', border: '1px solid #ddd' }}>Timestamp</th>\n            </tr>\n          </thead>\n          <tbody>\n            {metrics.map((metric, index) => (\n              <tr key={index}>\n                <td style={{ padding: '10px', border: '1px solid #ddd' }}>{metric.agent_id}</td>\n                <td style={{ padding: '10px', border: '1px solid #ddd' }}>{metric.name}</td>\n                <td style={{ padding: '10px', border: '1px solid #ddd' }}>{metric.value.toFixed(2)}</td>\n                <td style={{ padding: '10px', border: '1px solid #ddd' }}>{metric.unit}</td>\n                <td style={{ padding: '10px', border: '1px solid #ddd', whiteSpace: 'nowrap' }}>\n                  {new Date(parseInt(metric.timestamp)).toLocaleString()}\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      ) : (\n        !loading && <p>No metrics available.</p>\n      )}\n      <div style={{ marginTop: '40px', padding: '15px', backgroundColor: '#f5f5f5', borderRadius: '4px' }}>\n        <h3>How it works:</h3>\n        <ol>\n          <li>The Metrics Agent collects system metrics (CPU, memory, disk, network latency)</li>\n          <li>Metrics are sent to the Rust gRPC server every 10 seconds</li>\n          <li>This dashboard fetches and displays the latest metrics from the server</li>\n          <li>Metrics auto-refresh every 5 seconds</li>\n        </ol>\n        </div>\n      </div>\n    );\n  }\n"],"names":[],"mappings":"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"}}]
}