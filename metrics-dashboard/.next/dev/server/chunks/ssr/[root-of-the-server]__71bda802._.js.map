{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/jessiewhite/Development/Tech_Screens/Tensorwave/sre-take-home-challenge-15dc00b/metrics-dashboard/app/api/api.ts"],"sourcesContent":["import { Metric, WorkloadStatus } from './types';\n\nconst API_URL = process.env.NEXT_PUBLIC_API_URL || '';\n\nexport async function getCurrentMetric(): Promise<Metric> {\n    const response = await fetch(`${API_URL}/api/metrics?range=1h&limit=1`);\n\n    if (!response.ok) {\n        throw new Error('Failed to fetch current metric');\n    }\n\n    const metrics = await response.json();\n    if (metrics.length === 0) {\n        throw new Error('No metrics found');\n    }\n\n    return metrics[0];\n}\n\nexport async function getMetricsHistory(timeRange: '1h' | '24h' | '7d', agentId?: string, type?: string): Promise<Metric[]> {\n    let url = `${API_URL}/api/metrics/history?range=${timeRange}`;\n    if (agentId) url += `&agent_id=${agentId}`;\n    if (type) url += `&type=${type}`;\n\n    const response = await fetch(url);\n\n    if (!response.ok) {\n        throw new Error('Failed to fetch metrics history');\n    }\n\n    return response.json();\n}\n\nexport async function getWorkloadStatus(): Promise<WorkloadStatus> {\n    let response;\n\n        response = await fetch(`${API_URL}/api/workload/status`);\n\n        if (!response.ok) {\n            throw new Error('Failed to fetch workload status');\n        }\n\n        return response.json();\n    }\n\nexport async function startWorkload(): Promise<WorkloadStatus> {\n    const response = await fetch(`${API_URL}/api/workload/start`, {\n        method: 'POST',\n    });\n\n    if (!response.ok) {\n        throw new Error('Failed to start workload');\n    }\n\n    return response.json();\n}\n\nexport async function stopWorkload(): Promise<WorkloadStatus> {\n    const response = await fetch(`${API_URL}/api/workload/stop`, {\n        method: 'POST',\n    });\n\n    if (!response.ok) {\n        throw new Error('Failed to stop workload');\n    }\n\n    return response.json();\n}"],"names":[],"mappings":";;;;;;;;;;;;AAEA,MAAM,UAAU,QAAQ,GAAG,CAAC,mBAAmB,IAAI;AAE5C,eAAe;IAClB,MAAM,WAAW,MAAM,MAAM,GAAG,QAAQ,6BAA6B,CAAC;IAEtE,IAAI,CAAC,SAAS,EAAE,EAAE;QACd,MAAM,IAAI,MAAM;IACpB;IAEA,MAAM,UAAU,MAAM,SAAS,IAAI;IACnC,IAAI,QAAQ,MAAM,KAAK,GAAG;QACtB,MAAM,IAAI,MAAM;IACpB;IAEA,OAAO,OAAO,CAAC,EAAE;AACrB;AAEO,eAAe,kBAAkB,SAA8B,EAAE,OAAgB,EAAE,IAAa;IACnG,IAAI,MAAM,GAAG,QAAQ,2BAA2B,EAAE,WAAW;IAC7D,IAAI,SAAS,OAAO,CAAC,UAAU,EAAE,SAAS;IAC1C,IAAI,MAAM,OAAO,CAAC,MAAM,EAAE,MAAM;IAEhC,MAAM,WAAW,MAAM,MAAM;IAE7B,IAAI,CAAC,SAAS,EAAE,EAAE;QACd,MAAM,IAAI,MAAM;IACpB;IAEA,OAAO,SAAS,IAAI;AACxB;AAEO,eAAe;IAClB,IAAI;IAEA,WAAW,MAAM,MAAM,GAAG,QAAQ,oBAAoB,CAAC;IAEvD,IAAI,CAAC,SAAS,EAAE,EAAE;QACd,MAAM,IAAI,MAAM;IACpB;IAEA,OAAO,SAAS,IAAI;AACxB;AAEG,eAAe;IAClB,MAAM,WAAW,MAAM,MAAM,GAAG,QAAQ,mBAAmB,CAAC,EAAE;QAC1D,QAAQ;IACZ;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QACd,MAAM,IAAI,MAAM;IACpB;IAEA,OAAO,SAAS,IAAI;AACxB;AAEO,eAAe;IAClB,MAAM,WAAW,MAAM,MAAM,GAAG,QAAQ,kBAAkB,CAAC,EAAE;QACzD,QAAQ;IACZ;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QACd,MAAM,IAAI,MAAM;IACpB;IAEA,OAAO,SAAS,IAAI;AACxB"}},
    {"offset": {"line": 74, "column": 0}, "map": {"version":3,"sources":["file:///Users/jessiewhite/Development/Tech_Screens/Tensorwave/sre-take-home-challenge-15dc00b/metrics-dashboard/components/Client.tsx"],"sourcesContent":["'use client';\nimport { useEffect, useState } from 'react';\nimport { Metric, WorkloadStatus } from '../app/api/types';\nimport { getCurrentMetric, getWorkloadStatus } from '../app/api/api';\n\ninterface Props {\n    initialMetric: Metric;\n    initialWorkloadStatus: WorkloadStatus;\n}\n\nexport default function Client({ initialMetric, initialWorkloadStatus }: Props) {\n    const [metric, setMetric] = useState<Metric>(initialMetric);\n    const [workloadStatus, setWorkloadStatus] = useState<WorkloadStatus>(initialWorkloadStatus);\n\n    useEffect(() => {\n        const interval = setInterval(async () => {\n            try {\n                const [metricData, workloadData] = await Promise.all([\n                    getCurrentMetric(),\n                    getWorkloadStatus(),\n                ]);\n                setMetric(metricData);\n                setWorkloadStatus(workloadData);\n            } catch (error) {\n                console.error('Failed to fetch data:', error);\n            }\n        }, 5000);\n\n        return () => clearInterval(interval);\n    }, []);\n\n    return <MetricComponent initialWorkloadStatus={workloadStatus} metric={metric} />;\n}\n"],"names":[],"mappings":";;;;;AACA;AAEA;AAHA;;;;AAUe,SAAS,OAAO,EAAE,aAAa,EAAE,qBAAqB,EAAS;IAC1E,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yOAAQ,EAAS;IAC7C,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,yOAAQ,EAAiB;IAErE,IAAA,0OAAS,EAAC;QACN,MAAM,WAAW,YAAY;YACzB,IAAI;gBACA,MAAM,CAAC,YAAY,aAAa,GAAG,MAAM,QAAQ,GAAG,CAAC;oBACjD,IAAA,6JAAgB;oBAChB,IAAA,8JAAiB;iBACpB;gBACD,UAAU;gBACV,kBAAkB;YACtB,EAAE,OAAO,OAAO;gBACZ,QAAQ,KAAK,CAAC,yBAAyB;YAC3C;QACJ,GAAG;QAEH,OAAO,IAAM,cAAc;IAC/B,GAAG,EAAE;IAEL,qBAAO,sQAAC;QAAgB,uBAAuB;QAAgB,QAAQ;;;;;;AAC3E"}}]
}