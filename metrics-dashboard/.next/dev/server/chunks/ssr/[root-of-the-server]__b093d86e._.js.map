{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/jessiewhite/Development/Tech_Screens/Tensorwave/sre-take-home-challenge-15dc00b/www/pages/api/api.ts"],"sourcesContent":["import { Metric, WorkloadStatus } from './types';\n\nconst API_URL = process.env.SERVER_ADDRESS || '';\n\nexport async function getCurrentMetric(): Promise<Metric> {\n    const response = await fetch(`${API_URL}/api/metrics?range=1h&limit=1`);\n\n    if (!response.ok) {\n        throw new Error('Failed to fetch current metric');\n    }\n\n    const metrics = await response.json();\n    if (metrics.length === 0) {\n        throw new Error('No metrics found');\n    }\n\n    return metrics[0];\n}\n\nexport async function getMetricsHistory(timeRange: '1h' | '24h' | '7d', agentId?: string, type?: string): Promise<Metric[]> {\n    let url = `${API_URL}/api/metrics?range=${timeRange}`;\n    if (agentId) url += `&agent_id=${agentId}`;\n    if (type) url += `&type=${type}`;\n\n    const response = await fetch(url);\n\n    if (!response.ok) {\n        throw new Error('Failed to fetch metrics history');\n    }\n\n    return response.json();\n}\n\nexport async function getWorkloadStatus(): Promise<WorkloadStatus> {\n    let response;\n\n        response = await fetch(`${API_URL}/api/workload/status`);\n\n        if (!response.ok) {\n            throw new Error('Failed to fetch workload status');\n        }\n\n        return response.json();\n    }\n\nexport async function startWorkload(): Promise<WorkloadStatus> {\n    const response = await fetch(`${API_URL}/api/workload/start`, {\n        method: 'POST',\n    });\n\n    if (!response.ok) {\n        throw new Error('Failed to start workload');\n    }\n\n    return response.json();\n}\n\nexport async function stopWorkload(): Promise<WorkloadStatus> {\n    const response = await fetch(`${API_URL}/api/workload/stop`, {\n        method: 'POST',\n    });\n\n    if (!response.ok) {\n        throw new Error('Failed to stop workload');\n    }\n\n    return response.json();\n}"],"names":[],"mappings":";;;;;;;;;;;;AAEA,MAAM,UAAU,QAAQ,GAAG,CAAC,cAAc,IAAI;AAEvC,eAAe;IAClB,MAAM,WAAW,MAAM,MAAM,GAAG,QAAQ,6BAA6B,CAAC;IAEtE,IAAI,CAAC,SAAS,EAAE,EAAE;QACd,MAAM,IAAI,MAAM;IACpB;IAEA,MAAM,UAAU,MAAM,SAAS,IAAI;IACnC,IAAI,QAAQ,MAAM,KAAK,GAAG;QACtB,MAAM,IAAI,MAAM;IACpB;IAEA,OAAO,OAAO,CAAC,EAAE;AACrB;AAEO,eAAe,kBAAkB,SAA8B,EAAE,OAAgB,EAAE,IAAa;IACnG,IAAI,MAAM,GAAG,QAAQ,mBAAmB,EAAE,WAAW;IACrD,IAAI,SAAS,OAAO,CAAC,UAAU,EAAE,SAAS;IAC1C,IAAI,MAAM,OAAO,CAAC,MAAM,EAAE,MAAM;IAEhC,MAAM,WAAW,MAAM,MAAM;IAE7B,IAAI,CAAC,SAAS,EAAE,EAAE;QACd,MAAM,IAAI,MAAM;IACpB;IAEA,OAAO,SAAS,IAAI;AACxB;AAEO,eAAe;IAClB,IAAI;IAEA,WAAW,MAAM,MAAM,GAAG,QAAQ,oBAAoB,CAAC;IAEvD,IAAI,CAAC,SAAS,EAAE,EAAE;QACd,MAAM,IAAI,MAAM;IACpB;IAEA,OAAO,SAAS,IAAI;AACxB;AAEG,eAAe;IAClB,MAAM,WAAW,MAAM,MAAM,GAAG,QAAQ,mBAAmB,CAAC,EAAE;QAC1D,QAAQ;IACZ;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QACd,MAAM,IAAI,MAAM;IACpB;IAEA,OAAO,SAAS,IAAI;AACxB;AAEO,eAAe;IAClB,MAAM,WAAW,MAAM,MAAM,GAAG,QAAQ,kBAAkB,CAAC,EAAE;QACzD,QAAQ;IACZ;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QACd,MAAM,IAAI,MAAM;IACpB;IAEA,OAAO,SAAS,IAAI;AACxB"}},
    {"offset": {"line": 80, "column": 0}, "map": {"version":3,"sources":["file:///Users/jessiewhite/Development/Tech_Screens/Tensorwave/sre-take-home-challenge-15dc00b/www/pages/api/db.ts"],"sourcesContent":["import { MongoClient, Db } from 'mongodb';\n\nconst MONGODB_URI = process.env.MONGODB_URI;\nconst DATABASE_NAME = process.env.DATABASE_NAME;\n\nlet cachedClient: MongoClient | null = null;\nlet cachedDb: Db | null = null;\n\nexport async function connectToDatabase(): Promise<{ client: MongoClient; db: Db }> {\n  if (cachedClient && cachedDb) {\n    return { client: cachedClient, db: cachedDb };\n  }\n\n  try {\n    const client = new MongoClient(MONGODB_URI);\n    await client.connect();\n    const db = client.db(DATABASE_NAME);\n\n    // Test the connection\n    await db.admin().ping();\n\n    cachedClient = client;\n    cachedDb = db;\n\n    console.log('Connected to MongoDB successfully');\n    return { client, db };\n  } catch (error) {\n    console.error('Failed to connect to MongoDB:', error);\n    throw error;\n  }\n}\n\nexport async function getMetricsCollection() {\n  const { db } = await connectToDatabase();\n  return db.collection('metrics');\n}"],"names":[],"mappings":";;;;;;AAAA;;AAEA,MAAM,cAAc,QAAQ,GAAG,CAAC,WAAW;AAC3C,MAAM,gBAAgB,QAAQ,GAAG,CAAC,aAAa;AAE/C,IAAI,eAAmC;AACvC,IAAI,WAAsB;AAEnB,eAAe;IACpB,IAAI,gBAAgB,UAAU;QAC5B,OAAO;YAAE,QAAQ;YAAc,IAAI;QAAS;IAC9C;IAEA,IAAI;QACF,MAAM,SAAS,IAAI,sHAAW,CAAC;QAC/B,MAAM,OAAO,OAAO;QACpB,MAAM,KAAK,OAAO,EAAE,CAAC;QAErB,sBAAsB;QACtB,MAAM,GAAG,KAAK,GAAG,IAAI;QAErB,eAAe;QACf,WAAW;QAEX,QAAQ,GAAG,CAAC;QACZ,OAAO;YAAE;YAAQ;QAAG;IACtB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,iCAAiC;QAC/C,MAAM;IACR;AACF;AAEO,eAAe;IACpB,MAAM,EAAE,EAAE,EAAE,GAAG,MAAM;IACrB,OAAO,GAAG,UAAU,CAAC;AACvB"}}]
}